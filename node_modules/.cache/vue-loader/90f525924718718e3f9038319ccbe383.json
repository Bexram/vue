{"remainingRequest":"/Users/vladislavkitaev/calendar_project_new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/vladislavkitaev/calendar_project_new/src/components/v-table-users.vue?vue&type=style&index=0&id=28719792&lang=css&scoped=true&","dependencies":[{"path":"/Users/vladislavkitaev/calendar_project_new/src/components/v-table-users.vue","mtime":1604005114882},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnYtdGFibGUtdXNlcnN7CndpZHRoOiAxMDAlOwptYXgtd2lkdGg6IDEwMCU7CnotaW5kZXg6IDkwMDsgIApwb3NpdGlvbjogYWJzb2x1dGU7CnRvcDowcHg7Cn0KCnRhYmxlewptYXgtd2lkdGg6IDEwMCU7CndpZHRoOiAxMDAlOyAgCn0K"},{"version":3,"sources":["v-table-users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"v-table-users.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"v-table-users\">\n    <table>\n    <tr>\n      <td>Пользователь</td>\n      <td>Имя</td>\n      <td>Фамилия</td>\n      <td>Отчество</td>\n      <td>Активный</td>\n      <td>E-mail</td>\n      <td>Должность</td>\n      <td>Телефон</td>\n      <td>Дата рождения</td>\n      <td>Изменить</td>\n    </tr>\n    <tr v-for=\"(user,index) in users\" :key=\"user.id\">\n        <td>{{ user.username }}, id:{{user.id}}, {{index}}</td>\n        <td>{{ user.first_name }}</td>\n        <td>{{ user.last_name }}</td>\n        <td>{{ user.userprofile.thirdname }}</td>\n        <td>{{ user.is_active ? 'да' : 'нет' }}</td>\n        <td>{{ user.email }}</td>\n        <td>{{ user.userprofile.position }}</td>\n        <td>{{ user.userprofile.telephone }}</td>\n        <td>{{ user.userprofile.birthday }}</td>\n        <td>\n        <button @click=\"sendIndex(index)\">Редактировать</button>\n        <button @click=\"deleteUser(user.id,index)\">Удалить</button>\n        </td>\n      </tr>\n    </table>\n    <button @click=\"addUser\">Добавить пользователя</button>\n  </div>\n</template>\n\n<script>\nimport { bus } from './bus.js'\nimport axios from 'axios'\n\n\n\nexport default {\n  name: 'v-table-users',\n  components: {\n\n  },\n  props: {},\n  data() {\n    return {\n      users:{},\n    }\n  },\n\nmethods: {\n    //Отправить index пользователя, флаг для попапа\n    sendIndex(index){\n      bus.$emit('sendIndex', index);\n      bus.$emit('editUser',true);\n      console.log('Index ' + index + ' was send');\n    },\n    //Добавить пользователя, флаг для попапа\n    addUser(){\n      bus.$emit('addNewUser', true)\n    },\n    //Удалить пользователя из таблицы\n    deleteUser(id,index){\n      axios .delete('http://localhost:3000/users/'+id)\n      .then((response) =>{\n        console.log(response);\n      })\n      .catch((error) => {\n                console.log(error);  \n                return error;\n        });\n      this.users.splice(index,1);\n      console.log(this.users)\n      this.getUsersFromApi;\n    },\n    //Получить новый список пользователей из АПИ\n    getUsersFromApi(){\n      axios .get ('http://localhost:3000/users')\n        .then((response) =>{\n          this.users = response.data;\n        console.log(response,'users got');\n      })\n      .catch((error) => {\n                console.log(error);  \n                return error;\n    })\n    },\n    //Добавить пользователя из попап в таблицу, слушаем попап\n    addNewUserToTable(data){\n      this.users.push(data);\n    },\n  },\n  \n  mounted() {\n    this.getUsersFromApi()\n    bus.$on('sendNewUserToTable',this.addNewUserToTable);\n  },\n\n}\n</script>\n\n<style lang=\"css\" scoped>\n.v-table-users{\nwidth: 100%;\nmax-width: 100%;\nz-index: 900;  \nposition: absolute;\ntop:0px;\n}\n\ntable{\nmax-width: 100%;\nwidth: 100%;  \n}\n</style>\n"]}]}