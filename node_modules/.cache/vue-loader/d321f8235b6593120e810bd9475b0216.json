{"remainingRequest":"/Users/vladislavkitaev/calendar_project_new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/vladislavkitaev/calendar_project_new/src/components/v-table-users.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/vladislavkitaev/calendar_project_new/src/components/v-table-users.vue","mtime":1604005114882},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGJ1cyB9IGZyb20gJy4vYnVzLmpzJwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCgoKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAndi10YWJsZS11c2VycycsCiAgY29tcG9uZW50czogewoKICB9LAogIHByb3BzOiB7fSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcnM6e30sCiAgICB9CiAgfSwKCm1ldGhvZHM6IHsKICAgIC8v0J7RgtC/0YDQsNCy0LjRgtGMIGluZGV4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjywg0YTQu9Cw0LMg0LTQu9GPINC/0L7Qv9Cw0L/QsAogICAgc2VuZEluZGV4KGluZGV4KXsKICAgICAgYnVzLiRlbWl0KCdzZW5kSW5kZXgnLCBpbmRleCk7CiAgICAgIGJ1cy4kZW1pdCgnZWRpdFVzZXInLHRydWUpOwogICAgICBjb25zb2xlLmxvZygnSW5kZXggJyArIGluZGV4ICsgJyB3YXMgc2VuZCcpOwogICAgfSwKICAgIC8v0JTQvtCx0LDQstC40YLRjCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8sINGE0LvQsNCzINC00LvRjyDQv9C+0L/QsNC/0LAKICAgIGFkZFVzZXIoKXsKICAgICAgYnVzLiRlbWl0KCdhZGROZXdVc2VyJywgdHJ1ZSkKICAgIH0sCiAgICAvL9Cj0LTQsNC70LjRgtGMINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQuNC3INGC0LDQsdC70LjRhtGLCiAgICBkZWxldGVVc2VyKGlkLGluZGV4KXsKICAgICAgYXhpb3MgLmRlbGV0ZSgnaHR0cDovL2xvY2FsaG9zdDozMDAwL3VzZXJzLycraWQpCiAgICAgIC50aGVuKChyZXNwb25zZSkgPT57CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICB9KQogICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7ICAKICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcjsKICAgICAgICB9KTsKICAgICAgdGhpcy51c2Vycy5zcGxpY2UoaW5kZXgsMSk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMudXNlcnMpCiAgICAgIHRoaXMuZ2V0VXNlcnNGcm9tQXBpOwogICAgfSwKICAgIC8v0J/QvtC70YPRh9C40YLRjCDQvdC+0LLRi9C5INGB0L/QuNGB0L7QuiDQv9C+0LvRjNC30L7QstCw0YLQtdC70LXQuSDQuNC3INCQ0J/QmAogICAgZ2V0VXNlcnNGcm9tQXBpKCl7CiAgICAgIGF4aW9zIC5nZXQgKCdodHRwOi8vbG9jYWxob3N0OjMwMDAvdXNlcnMnKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT57CiAgICAgICAgICB0aGlzLnVzZXJzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSwndXNlcnMgZ290Jyk7CiAgICAgIH0pCiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsgIAogICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yOwogICAgfSkKICAgIH0sCiAgICAvL9CU0L7QsdCw0LLQuNGC0Ywg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINC40Lcg0L/QvtC/0LDQvyDQsiDRgtCw0LHQu9C40YbRgywg0YHQu9GD0YjQsNC10Lwg0L/QvtC/0LDQvwogICAgYWRkTmV3VXNlclRvVGFibGUoZGF0YSl7CiAgICAgIHRoaXMudXNlcnMucHVzaChkYXRhKTsKICAgIH0sCiAgfSwKICAKICBtb3VudGVkKCkgewogICAgdGhpcy5nZXRVc2Vyc0Zyb21BcGkoKQogICAgYnVzLiRvbignc2VuZE5ld1VzZXJUb1RhYmxlJyx0aGlzLmFkZE5ld1VzZXJUb1RhYmxlKTsKICB9LAoKfQo="},{"version":3,"sources":["v-table-users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA","file":"v-table-users.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"v-table-users\">\n    <table>\n    <tr>\n      <td>Пользователь</td>\n      <td>Имя</td>\n      <td>Фамилия</td>\n      <td>Отчество</td>\n      <td>Активный</td>\n      <td>E-mail</td>\n      <td>Должность</td>\n      <td>Телефон</td>\n      <td>Дата рождения</td>\n      <td>Изменить</td>\n    </tr>\n    <tr v-for=\"(user,index) in users\" :key=\"user.id\">\n        <td>{{ user.username }}, id:{{user.id}}, {{index}}</td>\n        <td>{{ user.first_name }}</td>\n        <td>{{ user.last_name }}</td>\n        <td>{{ user.userprofile.thirdname }}</td>\n        <td>{{ user.is_active ? 'да' : 'нет' }}</td>\n        <td>{{ user.email }}</td>\n        <td>{{ user.userprofile.position }}</td>\n        <td>{{ user.userprofile.telephone }}</td>\n        <td>{{ user.userprofile.birthday }}</td>\n        <td>\n        <button @click=\"sendIndex(index)\">Редактировать</button>\n        <button @click=\"deleteUser(user.id,index)\">Удалить</button>\n        </td>\n      </tr>\n    </table>\n    <button @click=\"addUser\">Добавить пользователя</button>\n  </div>\n</template>\n\n<script>\nimport { bus } from './bus.js'\nimport axios from 'axios'\n\n\n\nexport default {\n  name: 'v-table-users',\n  components: {\n\n  },\n  props: {},\n  data() {\n    return {\n      users:{},\n    }\n  },\n\nmethods: {\n    //Отправить index пользователя, флаг для попапа\n    sendIndex(index){\n      bus.$emit('sendIndex', index);\n      bus.$emit('editUser',true);\n      console.log('Index ' + index + ' was send');\n    },\n    //Добавить пользователя, флаг для попапа\n    addUser(){\n      bus.$emit('addNewUser', true)\n    },\n    //Удалить пользователя из таблицы\n    deleteUser(id,index){\n      axios .delete('http://localhost:3000/users/'+id)\n      .then((response) =>{\n        console.log(response);\n      })\n      .catch((error) => {\n                console.log(error);  \n                return error;\n        });\n      this.users.splice(index,1);\n      console.log(this.users)\n      this.getUsersFromApi;\n    },\n    //Получить новый список пользователей из АПИ\n    getUsersFromApi(){\n      axios .get ('http://localhost:3000/users')\n        .then((response) =>{\n          this.users = response.data;\n        console.log(response,'users got');\n      })\n      .catch((error) => {\n                console.log(error);  \n                return error;\n    })\n    },\n    //Добавить пользователя из попап в таблицу, слушаем попап\n    addNewUserToTable(data){\n      this.users.push(data);\n    },\n  },\n  \n  mounted() {\n    this.getUsersFromApi()\n    bus.$on('sendNewUserToTable',this.addNewUserToTable);\n  },\n\n}\n</script>\n\n<style lang=\"css\" scoped>\n.v-table-users{\nwidth: 100%;\nmax-width: 100%;\nz-index: 900;  \nposition: absolute;\ntop:0px;\n}\n\ntable{\nmax-width: 100%;\nwidth: 100%;  \n}\n</style>\n"]}]}