{"remainingRequest":"/Users/vladislavkitaev/calendar_project_new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/vladislavkitaev/calendar_project_new/src/components/v-table-users.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/vladislavkitaev/calendar_project_new/src/components/v-table-users.vue","mtime":1604079076216},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGJ1cyB9IGZyb20gJy4vYnVzLmpzJwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3YtdGFibGUtdXNlcnMnLAogIGNvbXBvbmVudHM6IHsKCiAgfSwKICBwcm9wczoge30sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJzOnt9LAogICAgfQogIH0sCgptZXRob2RzOiB7CiAgICAKICAgIC8v0J7RgtC/0YDQsNCy0LjRgtGMIGluZGV4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjywg0YTQu9Cw0LMg0LTQu9GPINC/0L7Qv9Cw0L/QsAogICAgc2VuZEluZGV4KGluZGV4KXsKICAgICAgYnVzLiRlbWl0KCdzZW5kSW5kZXgnLCBpbmRleCk7CiAgICAgIGJ1cy4kZW1pdCgnZWRpdFVzZXInLHRydWUpOwogICAgICBjb25zb2xlLmxvZygnSW5kZXggJyArIGluZGV4ICsgJyB3YXMgc2VuZCcpOwogICAgfSwKICAgIC8v0JTQvtCx0LDQstC40YLRjCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8sINGE0LvQsNCzINC00LvRjyDQv9C+0L/QsNC/0LAKICAgIGFkZFVzZXIoKXsKICAgICAgYnVzLiRlbWl0KCdhZGROZXdVc2VyJywgdHJ1ZSkKICAgIH0sCiAgICAvL9Cj0LTQsNC70LjRgtGMINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQuNC3INGC0LDQsdC70LjRhtGLCiAgICBkZWxldGVVc2VyKGlkLGluZGV4KXsKICAgICAgYXhpb3MgLmRlbGV0ZSgnaHR0cDovLzI1LjU4LjE4MS40Nzo4MDAwL3VzZXJzLycpCiAgICAgIC50aGVuKChyZXNwb25zZSkgPT57CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICB9KQogICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7ICAKICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcjsKICAgICAgICB9KTsKICAgICAgdGhpcy51c2Vycy5zcGxpY2UoaW5kZXgsMSk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMudXNlcnMpCiAgICAgIHRoaXMuZ2V0VXNlcnNGcm9tQXBpOwogICAgfSwKICAgIC8v0J/QvtC70YPRh9C40YLRjCDQvdC+0LLRi9C5INGB0L/QuNGB0L7QuiDQv9C+0LvRjNC30L7QstCw0YLQtdC70LXQuSDQuNC3INCQ0J/QmAogICAgZ2V0VXNlcnNGcm9tQXBpKCl7CiAgICAgIGF4aW9zIC5nZXQgKCdodHRwOi8vMjUuNTguMTgxLjQ3OjgwMDAvdXNlcnMvJykKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+ewogICAgICAgICAgdGhpcy51c2VycyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UsJ3VzZXJzIGdvdCcpOwogICAgICB9KQogICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7ICAKICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcjsKICAgIH0pCiAgICB9LAogICAgLy/QlNC+0LHQsNCy0LjRgtGMINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQuNC3INC/0L7Qv9Cw0L8g0LIg0YLQsNCx0LvQuNGG0YMsINGB0LvRg9GI0LDQtdC8INC/0L7Qv9Cw0L8KICAgIGFkZE5ld1VzZXJUb1RhYmxlKGRhdGEpewogICAgICB0aGlzLnVzZXJzLnB1c2goZGF0YSk7CiAgICB9LAogIH0sCiAgCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0VXNlcnNGcm9tQXBpKCkKICAgIGJ1cy4kb24oJ3NlbmROZXdVc2VyVG9UYWJsZScsdGhpcy5hZGROZXdVc2VyVG9UYWJsZSk7CiAgfSwKCn0K"},{"version":3,"sources":["v-table-users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA","file":"v-table-users.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"v-table-users\">\n    <table>\n    <tr>\n      <td>Пользователь</td>\n      <td>Имя</td>\n      <td>Фамилия</td>\n      <td>Отчество</td>\n      <td>Активный</td>\n      <td>E-mail</td>\n      <td>Должность</td>\n      <td>Телефон</td>\n      <td>Дата рождения</td>\n      <td>Изменить</td>\n    </tr>\n    <tr v-for=\"(user,index) in users\" :key=\"user.id\">\n        <td>{{ user.username }}, id:{{user.id}}, {{index}}</td>\n        <td>{{ user.first_name }}</td>\n        <td>{{ user.last_name }}</td>\n        <td>{{ user.thirdname }}</td>\n        <td>{{ user.is_active ? 'да' : 'нет' }}</td>\n        <td>{{ user.email }}</td>\n        <td>{{ user.position }}</td>\n        <td>{{ user.telephone }}</td>\n        <td>{{ user.birthday }}</td>\n        <td>\n        <button @click=\"sendIndex(index)\">Редактировать</button>\n        <button @click=\"deleteUser(user.id,index)\">Удалить</button>\n        </td>\n      </tr>\n    </table>\n    <button @click=\"addUser\">Добавить пользователя</button>\n  </div>\n</template>\n\n<script>\nimport { bus } from './bus.js'\nimport axios from 'axios'\n\nexport default {\n  name: 'v-table-users',\n  components: {\n\n  },\n  props: {},\n  data() {\n    return {\n      users:{},\n    }\n  },\n\nmethods: {\n    \n    //Отправить index пользователя, флаг для попапа\n    sendIndex(index){\n      bus.$emit('sendIndex', index);\n      bus.$emit('editUser',true);\n      console.log('Index ' + index + ' was send');\n    },\n    //Добавить пользователя, флаг для попапа\n    addUser(){\n      bus.$emit('addNewUser', true)\n    },\n    //Удалить пользователя из таблицы\n    deleteUser(id,index){\n      axios .delete('http://25.58.181.47:8000/users/')\n      .then((response) =>{\n        console.log(response);\n      })\n      .catch((error) => {\n                console.log(error);  \n                return error;\n        });\n      this.users.splice(index,1);\n      console.log(this.users)\n      this.getUsersFromApi;\n    },\n    //Получить новый список пользователей из АПИ\n    getUsersFromApi(){\n      axios .get ('http://25.58.181.47:8000/users/')\n        .then((response) =>{\n          this.users = response.data;\n        console.log(response,'users got');\n      })\n      .catch((error) => {\n                console.log(error);  \n                return error;\n    })\n    },\n    //Добавить пользователя из попап в таблицу, слушаем попап\n    addNewUserToTable(data){\n      this.users.push(data);\n    },\n  },\n  \n  mounted() {\n    this.getUsersFromApi()\n    bus.$on('sendNewUserToTable',this.addNewUserToTable);\n  },\n\n}\n</script>\n\n<style lang=\"css\" scoped>\n.v-table-users{\nwidth: 100%;\nmax-width: 100%;\nz-index: 900;  \nposition: absolute;\ntop:0px;\n}\n\ntable{\nmax-width: 100%;\nwidth: 100%;  \n}\n</style>\n"]}]}