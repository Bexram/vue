{"remainingRequest":"/Users/vladislavkitaev/calendar_project_new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/vladislavkitaev/calendar_project_new/src/components/v-table-users.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/vladislavkitaev/calendar_project_new/src/components/v-table-users.vue","mtime":1605813483242},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7bWFwQWN0aW9ucywgbWFwR2V0dGVyc30gZnJvbSAndnVleCcKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAndi10YWJsZS11c2VycycsCiAgY29tcG9uZW50czogewoKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2Vyczp7fSwKICAgICAgbmVlZElkOicnLAogICAgfQogIH0sCgpjcmVhdGVkKCl7CiAgdGhpcy5HRVRfVVNFUlNfRlJPTV9BUEkoKTsKfSwKCm1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWwogICAgICAnR0VUX1VTRVJTX0ZST01fQVBJJywKICAgICAgJ0RFTEVURV9VU0VSX0ZST01fQVBJJywKICAgICAgJ0dFVF9SRUZSRVNIJwogICAgXSksICAgIAogICAgZGVsZXRlVXNlcihuZWVkSWQpewogICAgICB0aGlzLnVzZXJJZCA9IG5lZWRJZDsKICAgICAgY29uc29sZS5sb2coJ3VzZXIgaWQgaXMgJyx0aGlzLnVzZXJJZCk7CiAgICAgIHRoaXMuREVMRVRFX1VTRVJfRlJPTV9BUEkodGhpcy51c2VySWQpCiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIHdpdGggaWQgJytuZWVkSWQrICcgd2FzIGRlbGV0ZWQnKTsKICAgICAgICB0aGlzLkdFVF9VU0VSU19GUk9NX0FQSSgpOwogICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSwnVGFibGUgZ290IHVzZXJzIGZyb20gQVBJJyk7CiAgICB9KQogICAgfSwKICAgIAogICAgY2hlY2tBdXRoKGVycm9yKXsKICAgICAgaWYoZXJyb3IpewogICAgICAgIGNvbnNvbGUubG9nKCdoYXZlIGVycm9yJyxlcnJvcik7CiAgICAgIH0KICAgIH0KICB9LAogIAogIC8vIG1vdW50ZWQoKSB7CiAgLy8gICAvLyB0aGlzLkFVVEhPUklaQVRJT04oKQogIC8vICAgLy8gLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgLy8gICAvLyAgIGlmIChyZXNwb25zZS5yZXNwb25zZS5zdGF0dXMgPT0gNDAxKXsKICAvLyAgIC8vICAgLy/QvNC10YLQvtC0INC/0L7Qu9GD0YfQtdC90LjRjyDRgNC10YTRgNC10YjQsCDQuNC3INCw0L/QuAogIC8vICAgLy8gICB0aGlzLkdFVF9SRUZSRVNIKCkKICAvLyAgIC8vICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgLy8gICAvLyAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKXsKICAvLyAgIC8vICAgICAgICBjb25zb2xlLmxvZygnWkFFQklTJykKICAvLyAgIC8vICAgICB9CiAgLy8gICAgICAgLy8gaWYgKHJlc3BvbnNlLnJlc3Bvc2Uuc3RhdHVzID09IDQwMSl7CiAgLy8gICAgICAgLy8gIHRoaXMuJHJvdXRlci5wdXNoKCcvJyk7CiAgLy8gICAgICAgLy8gfQogIC8vICAgICAvL30pCiAgLy8gICAgIH0KICAvLyAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwICYmIDIwMSl7CiAgLy8gICAgIGNvbnNvbGUubG9nKCd5b3UgaGF2ZSA0MDEgZXJyb3InKTsKICAvLyAgICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKTsKICAvLyAgICAgfQogIC8vICAgfSkKICAvLyB9LAoKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbCiAgICAgICdVU0VSUycKICAgIF0pLAogIH0sCgogIGJlZm9yZVJvdXRlVXBkYXRlKCkgewogICAgY29uc29sZS5sb2coJ0dPVCBJVCEnKTsKICAgIHRoaXMuR0VUX1VTRVJTX0ZST01fQVBJKCk7CiAgfQoKfQo="},{"version":3,"sources":["v-table-users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA","file":"v-table-users.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"v-table-users\">\n    <div class=\"table-header\">\n      <h1>Пользователи</h1>\n <router-link :to=\"{name:'editUser',params: {createNewUser: true}}\">\n    <button class=\"btn\">+ Добавить пользователя</button>\n     </router-link>\n    </div>\n    <table>\n    <tr>\n      <td>Фамилия</td>\n      <td>Имя</td>\n      <td>Отчество</td>\n      <td>Активный</td>\n      <td>E-mail</td>\n      <td>Должность</td>\n      <td>Телефон</td>\n      <td>Дата рождения</td>\n      <td>Изменить/удалить</td>\n    </tr>\n    <tr v-for=\"(user,index) in USERS\" :key=\"user.username.id\">\n        <td>{{ user.userprofile.last_name }}</td>\n        <td>{{ user.userprofile.first_name }}</td>\n        <td>{{ user.userprofile.thirdname }}</td>\n        <td>{{ user.is_active ? 'да' : 'нет' }}</td>\n        <td>{{ user.userprofile.email }}</td>\n        <td>{{ user.userprofile.position }}</td>\n        <td><a href=\"$user.telephone\">{{ user.telephone }}</a></td>\n        <td>{{ user.userprofile.birthday }}</td>\n        <td>\n          <router-link :to=\"{name:'editUser',params: {userPos: index, editUser: true}}\">\n            <button \n            :disabled=\"user.username == 'bexram'\" \n            class=\"edit_btn\"\n            >Редактировать\n            </button>\n          </router-link>\n            <button \n            @click=\"deleteUser(user.id)\" \n            :disabled=\"user.username == 'bexram'\"\n            class=\"delete_btn\"\n            >Удалить\n            </button>\n        </td>\n      </tr>\n    </table>\n  </div>\n</template>\n\n<script>\nimport {mapActions, mapGetters} from 'vuex'\n\nexport default {\n  name: 'v-table-users',\n  components: {\n\n  },\n  data() {\n    return {\n      users:{},\n      needId:'',\n    }\n  },\n\ncreated(){\n  this.GET_USERS_FROM_API();\n},\n\nmethods: {\n    ...mapActions([\n      'GET_USERS_FROM_API',\n      'DELETE_USER_FROM_API',\n      'GET_REFRESH'\n    ]),    \n    deleteUser(needId){\n      this.userId = needId;\n      console.log('user id is ',this.userId);\n      this.DELETE_USER_FROM_API(this.userId)\n      .then((response) => {\n        console.log('User with id '+needId+ ' was deleted');\n        this.GET_USERS_FROM_API();\n      console.log(response,'Table got users from API');\n    })\n    },\n    \n    checkAuth(error){\n      if(error){\n        console.log('have error',error);\n      }\n    }\n  },\n  \n  // mounted() {\n  //   // this.AUTHORIZATION()\n  //   // .then((response) => {\n  //   //   if (response.response.status == 401){\n  //   //   //метод получения рефреша из апи\n  //   //   this.GET_REFRESH()\n  //   //   .then((response) => {\n  //   //      if (response.status == 200){\n  //   //        console.log('ZAEBIS')\n  //   //     }\n  //       // if (response.respose.status == 401){\n  //       //  this.$router.push('/');\n  //       // }\n  //     //})\n  //     }\n  //     if (response.status !== 200 && 201){\n  //     console.log('you have 401 error');\n  //     this.$router.push('/');\n  //     }\n  //   })\n  // },\n\n  computed: {\n    ...mapGetters([\n      'USERS'\n    ]),\n  },\n\n  beforeRouteUpdate() {\n    console.log('GOT IT!');\n    this.GET_USERS_FROM_API();\n  }\n\n}\n</script>\n\n<style lang=\"css\" scoped>\n.v-table-users{\nwidth: 100%;  \n}\n\n\ntable{\nborder-spacing: 0px;\nmax-width: 100%;\nwidth: 100%; \nfont-weight: bold;\nbackground: rgba(255,255,255,0.8);\nborder: 1px solid #9f752b;  \n}\n\ntr,td{\n  border:1px solid #9f752b;\n}\n\n.table-header{\ndisplay: flex;\nflex-direction: row;\nalign-self: flex-start;\nbackground: rgba(255,255,255,0.8);\n}\n\n.table-header a{\ndisplay: flex;\njustify-content: center;\nalign-items: center;  \n}\n\n.table-header a button{\nmargin: 10px;  \n}\n\n.component_heading{\ndisplay: block;\nheight: 35px;  \n}\n\n.btn{\nborder-radius: 10px;\npadding: 10px;\nbackground: wheat;\nborder: none;\nfont-size: 20px;\ncolor: #9f752b ;  \nmargin: 0 10px;\nmargin-top: 10px;\nfont-size: 15px;\nfont-weight: bold;\nfont-family: inherit ;\n}\n\n.edit_btn{\nborder: none;\nbackground: wheat;\nfont-weight: bold;\ncolor: #9f752b;\npadding: 5px;\nmargin: 5px 5px;\nborder-radius: 5px;\n}\n\n.delete_btn{\nborder: none;\nbackground: #9f752b;\nfont-weight: bold;\ncolor: #fdf4e3;\npadding: 5px;\nmargin: 5px 5px;  \nborder-radius: 5px;\n}\n</style>\n"]}]}