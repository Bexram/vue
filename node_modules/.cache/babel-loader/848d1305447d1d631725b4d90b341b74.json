{"remainingRequest":"/Users/vladislavkitaev/calendar_project_new/node_modules/babel-loader/lib/index.js!/Users/vladislavkitaev/calendar_project_new/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/vladislavkitaev/calendar_project_new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/vladislavkitaev/calendar_project_new/src/components/v-table-users.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/vladislavkitaev/calendar_project_new/src/components/v-table-users.vue","mtime":1604079076216},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgYnVzIH0gZnJvbSAnLi9idXMuanMnOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3YtdGFibGUtdXNlcnMnLAogIGNvbXBvbmVudHM6IHt9LAogIHByb3BzOiB7fSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcnM6IHt9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy/QntGC0L/RgNCw0LLQuNGC0YwgaW5kZXgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPLCDRhNC70LDQsyDQtNC70Y8g0L/QvtC/0LDQv9CwCiAgICBzZW5kSW5kZXg6IGZ1bmN0aW9uIHNlbmRJbmRleChpbmRleCkgewogICAgICBidXMuJGVtaXQoJ3NlbmRJbmRleCcsIGluZGV4KTsKICAgICAgYnVzLiRlbWl0KCdlZGl0VXNlcicsIHRydWUpOwogICAgICBjb25zb2xlLmxvZygnSW5kZXggJyArIGluZGV4ICsgJyB3YXMgc2VuZCcpOwogICAgfSwKICAgIC8v0JTQvtCx0LDQstC40YLRjCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8sINGE0LvQsNCzINC00LvRjyDQv9C+0L/QsNC/0LAKICAgIGFkZFVzZXI6IGZ1bmN0aW9uIGFkZFVzZXIoKSB7CiAgICAgIGJ1cy4kZW1pdCgnYWRkTmV3VXNlcicsIHRydWUpOwogICAgfSwKICAgIC8v0KPQtNCw0LvQuNGC0Ywg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINC40Lcg0YLQsNCx0LvQuNGG0YsKICAgIGRlbGV0ZVVzZXI6IGZ1bmN0aW9uIGRlbGV0ZVVzZXIoaWQsIGluZGV4KSB7CiAgICAgIGF4aW9zLmRlbGV0ZSgnaHR0cDovLzI1LjU4LjE4MS40Nzo4MDAwL3VzZXJzLycpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgcmV0dXJuIGVycm9yOwogICAgICB9KTsKICAgICAgdGhpcy51c2Vycy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLnVzZXJzKTsKICAgICAgdGhpcy5nZXRVc2Vyc0Zyb21BcGk7CiAgICB9LAogICAgLy/Qn9C+0LvRg9GH0LjRgtGMINC90L7QstGL0Lkg0YHQv9C40YHQvtC6INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC5INC40Lcg0JDQn9CYCiAgICBnZXRVc2Vyc0Zyb21BcGk6IGZ1bmN0aW9uIGdldFVzZXJzRnJvbUFwaSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGF4aW9zLmdldCgnaHR0cDovLzI1LjU4LjE4MS40Nzo4MDAwL3VzZXJzLycpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMudXNlcnMgPSByZXNwb25zZS5kYXRhOwogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLCAndXNlcnMgZ290Jyk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICByZXR1cm4gZXJyb3I7CiAgICAgIH0pOwogICAgfSwKICAgIC8v0JTQvtCx0LDQstC40YLRjCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0LjQtyDQv9C+0L/QsNC/INCyINGC0LDQsdC70LjRhtGDLCDRgdC70YPRiNCw0LXQvCDQv9C+0L/QsNC/CiAgICBhZGROZXdVc2VyVG9UYWJsZTogZnVuY3Rpb24gYWRkTmV3VXNlclRvVGFibGUoZGF0YSkgewogICAgICB0aGlzLnVzZXJzLnB1c2goZGF0YSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRVc2Vyc0Zyb21BcGkoKTsKICAgIGJ1cy4kb24oJ3NlbmROZXdVc2VyVG9UYWJsZScsIHRoaXMuYWRkTmV3VXNlclRvVGFibGUpOwogIH0KfTs="},{"version":3,"sources":["v-table-users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA,SAAA,GAAA,QAAA,UAAA;AACA,OAAA,KAAA,MAAA,OAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,eADA;AAEA,EAAA,UAAA,EAAA,EAFA;AAKA,EAAA,KAAA,EAAA,EALA;AAMA,EAAA,IANA,kBAMA;AACA,WAAA;AACA,MAAA,KAAA,EAAA;AADA,KAAA;AAGA,GAVA;AAYA,EAAA,OAAA,EAAA;AAEA;AACA,IAAA,SAHA,qBAGA,KAHA,EAGA;AACA,MAAA,GAAA,CAAA,KAAA,CAAA,WAAA,EAAA,KAAA;AACA,MAAA,GAAA,CAAA,KAAA,CAAA,UAAA,EAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,WAAA,KAAA,GAAA,WAAA;AACA,KAPA;AAQA;AACA,IAAA,OATA,qBASA;AACA,MAAA,GAAA,CAAA,KAAA,CAAA,YAAA,EAAA,IAAA;AACA,KAXA;AAYA;AACA,IAAA,UAbA,sBAaA,EAbA,EAaA,KAbA,EAaA;AACA,MAAA,KAAA,CAAA,MAAA,CAAA,iCAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA;AACA,OAHA,EAIA,KAJA,CAIA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,eAAA,KAAA;AACA,OAPA;AAQA,WAAA,KAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,KAAA;AACA,WAAA,eAAA;AACA,KAzBA;AA0BA;AACA,IAAA,eA3BA,6BA2BA;AAAA;;AACA,MAAA,KAAA,CAAA,GAAA,CAAA,iCAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,KAAA,GAAA,QAAA,CAAA,IAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA,EAAA,WAAA;AACA,OAJA,EAKA,KALA,CAKA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,eAAA,KAAA;AACA,OARA;AASA,KArCA;AAsCA;AACA,IAAA,iBAvCA,6BAuCA,IAvCA,EAuCA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,IAAA;AACA;AAzCA,GAZA;AAwDA,EAAA,OAxDA,qBAwDA;AACA,SAAA,eAAA;AACA,IAAA,GAAA,CAAA,GAAA,CAAA,oBAAA,EAAA,KAAA,iBAAA;AACA;AA3DA,CAAA","sourcesContent":["<template>\n  <div class=\"v-table-users\">\n    <table>\n    <tr>\n      <td>Пользователь</td>\n      <td>Имя</td>\n      <td>Фамилия</td>\n      <td>Отчество</td>\n      <td>Активный</td>\n      <td>E-mail</td>\n      <td>Должность</td>\n      <td>Телефон</td>\n      <td>Дата рождения</td>\n      <td>Изменить</td>\n    </tr>\n    <tr v-for=\"(user,index) in users\" :key=\"user.id\">\n        <td>{{ user.username }}, id:{{user.id}}, {{index}}</td>\n        <td>{{ user.first_name }}</td>\n        <td>{{ user.last_name }}</td>\n        <td>{{ user.thirdname }}</td>\n        <td>{{ user.is_active ? 'да' : 'нет' }}</td>\n        <td>{{ user.email }}</td>\n        <td>{{ user.position }}</td>\n        <td>{{ user.telephone }}</td>\n        <td>{{ user.birthday }}</td>\n        <td>\n        <button @click=\"sendIndex(index)\">Редактировать</button>\n        <button @click=\"deleteUser(user.id,index)\">Удалить</button>\n        </td>\n      </tr>\n    </table>\n    <button @click=\"addUser\">Добавить пользователя</button>\n  </div>\n</template>\n\n<script>\nimport { bus } from './bus.js'\nimport axios from 'axios'\n\nexport default {\n  name: 'v-table-users',\n  components: {\n\n  },\n  props: {},\n  data() {\n    return {\n      users:{},\n    }\n  },\n\nmethods: {\n    \n    //Отправить index пользователя, флаг для попапа\n    sendIndex(index){\n      bus.$emit('sendIndex', index);\n      bus.$emit('editUser',true);\n      console.log('Index ' + index + ' was send');\n    },\n    //Добавить пользователя, флаг для попапа\n    addUser(){\n      bus.$emit('addNewUser', true)\n    },\n    //Удалить пользователя из таблицы\n    deleteUser(id,index){\n      axios .delete('http://25.58.181.47:8000/users/')\n      .then((response) =>{\n        console.log(response);\n      })\n      .catch((error) => {\n                console.log(error);  \n                return error;\n        });\n      this.users.splice(index,1);\n      console.log(this.users)\n      this.getUsersFromApi;\n    },\n    //Получить новый список пользователей из АПИ\n    getUsersFromApi(){\n      axios .get ('http://25.58.181.47:8000/users/')\n        .then((response) =>{\n          this.users = response.data;\n        console.log(response,'users got');\n      })\n      .catch((error) => {\n                console.log(error);  \n                return error;\n    })\n    },\n    //Добавить пользователя из попап в таблицу, слушаем попап\n    addNewUserToTable(data){\n      this.users.push(data);\n    },\n  },\n  \n  mounted() {\n    this.getUsersFromApi()\n    bus.$on('sendNewUserToTable',this.addNewUserToTable);\n  },\n\n}\n</script>\n\n<style lang=\"css\" scoped>\n.v-table-users{\nwidth: 100%;\nmax-width: 100%;\nz-index: 900;  \nposition: absolute;\ntop:0px;\n}\n\ntable{\nmax-width: 100%;\nwidth: 100%;  \n}\n</style>\n"],"sourceRoot":"src/components"}]}