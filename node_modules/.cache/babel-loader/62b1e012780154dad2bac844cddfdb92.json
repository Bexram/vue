{"remainingRequest":"/Users/vladislavkitaev/calendar_project_new/node_modules/babel-loader/lib/index.js!/Users/vladislavkitaev/calendar_project_new/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/vladislavkitaev/calendar_project_new/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/vladislavkitaev/calendar_project_new/src/components/v-table-users.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/vladislavkitaev/calendar_project_new/src/components/v-table-users.vue","mtime":1604005114882},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vladislavkitaev/calendar_project_new/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgYnVzIH0gZnJvbSAnLi9idXMuanMnOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3YtdGFibGUtdXNlcnMnLAogIGNvbXBvbmVudHM6IHt9LAogIHByb3BzOiB7fSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcnM6IHt9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy/QntGC0L/RgNCw0LLQuNGC0YwgaW5kZXgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPLCDRhNC70LDQsyDQtNC70Y8g0L/QvtC/0LDQv9CwCiAgICBzZW5kSW5kZXg6IGZ1bmN0aW9uIHNlbmRJbmRleChpbmRleCkgewogICAgICBidXMuJGVtaXQoJ3NlbmRJbmRleCcsIGluZGV4KTsKICAgICAgYnVzLiRlbWl0KCdlZGl0VXNlcicsIHRydWUpOwogICAgICBjb25zb2xlLmxvZygnSW5kZXggJyArIGluZGV4ICsgJyB3YXMgc2VuZCcpOwogICAgfSwKICAgIC8v0JTQvtCx0LDQstC40YLRjCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8sINGE0LvQsNCzINC00LvRjyDQv9C+0L/QsNC/0LAKICAgIGFkZFVzZXI6IGZ1bmN0aW9uIGFkZFVzZXIoKSB7CiAgICAgIGJ1cy4kZW1pdCgnYWRkTmV3VXNlcicsIHRydWUpOwogICAgfSwKICAgIC8v0KPQtNCw0LvQuNGC0Ywg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINC40Lcg0YLQsNCx0LvQuNGG0YsKICAgIGRlbGV0ZVVzZXI6IGZ1bmN0aW9uIGRlbGV0ZVVzZXIoaWQsIGluZGV4KSB7CiAgICAgIGF4aW9zLmRlbGV0ZSgnaHR0cDovL2xvY2FsaG9zdDozMDAwL3VzZXJzLycgKyBpZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICByZXR1cm4gZXJyb3I7CiAgICAgIH0pOwogICAgICB0aGlzLnVzZXJzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMudXNlcnMpOwogICAgICB0aGlzLmdldFVzZXJzRnJvbUFwaTsKICAgIH0sCiAgICAvL9Cf0L7Qu9GD0YfQuNGC0Ywg0L3QvtCy0YvQuSDRgdC/0LjRgdC+0Log0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C10Lkg0LjQtyDQkNCf0JgKICAgIGdldFVzZXJzRnJvbUFwaTogZnVuY3Rpb24gZ2V0VXNlcnNGcm9tQXBpKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvdXNlcnMnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLnVzZXJzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSwgJ3VzZXJzIGdvdCcpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgcmV0dXJuIGVycm9yOwogICAgICB9KTsKICAgIH0sCiAgICAvL9CU0L7QsdCw0LLQuNGC0Ywg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINC40Lcg0L/QvtC/0LDQvyDQsiDRgtCw0LHQu9C40YbRgywg0YHQu9GD0YjQsNC10Lwg0L/QvtC/0LDQvwogICAgYWRkTmV3VXNlclRvVGFibGU6IGZ1bmN0aW9uIGFkZE5ld1VzZXJUb1RhYmxlKGRhdGEpIHsKICAgICAgdGhpcy51c2Vycy5wdXNoKGRhdGEpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0VXNlcnNGcm9tQXBpKCk7CiAgICBidXMuJG9uKCdzZW5kTmV3VXNlclRvVGFibGUnLCB0aGlzLmFkZE5ld1VzZXJUb1RhYmxlKTsKICB9Cn07"},{"version":3,"sources":["v-table-users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA,SAAA,GAAA,QAAA,UAAA;AACA,OAAA,KAAA,MAAA,OAAA;AAIA,eAAA;AACA,EAAA,IAAA,EAAA,eADA;AAEA,EAAA,UAAA,EAAA,EAFA;AAKA,EAAA,KAAA,EAAA,EALA;AAMA,EAAA,IANA,kBAMA;AACA,WAAA;AACA,MAAA,KAAA,EAAA;AADA,KAAA;AAGA,GAVA;AAYA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,SAFA,qBAEA,KAFA,EAEA;AACA,MAAA,GAAA,CAAA,KAAA,CAAA,WAAA,EAAA,KAAA;AACA,MAAA,GAAA,CAAA,KAAA,CAAA,UAAA,EAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,WAAA,KAAA,GAAA,WAAA;AACA,KANA;AAOA;AACA,IAAA,OARA,qBAQA;AACA,MAAA,GAAA,CAAA,KAAA,CAAA,YAAA,EAAA,IAAA;AACA,KAVA;AAWA;AACA,IAAA,UAZA,sBAYA,EAZA,EAYA,KAZA,EAYA;AACA,MAAA,KAAA,CAAA,MAAA,CAAA,iCAAA,EAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA;AACA,OAHA,EAIA,KAJA,CAIA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,eAAA,KAAA;AACA,OAPA;AAQA,WAAA,KAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,KAAA;AACA,WAAA,eAAA;AACA,KAxBA;AAyBA;AACA,IAAA,eA1BA,6BA0BA;AAAA;;AACA,MAAA,KAAA,CAAA,GAAA,CAAA,6BAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,KAAA,GAAA,QAAA,CAAA,IAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA,EAAA,WAAA;AACA,OAJA,EAKA,KALA,CAKA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,eAAA,KAAA;AACA,OARA;AASA,KApCA;AAqCA;AACA,IAAA,iBAtCA,6BAsCA,IAtCA,EAsCA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,IAAA;AACA;AAxCA,GAZA;AAuDA,EAAA,OAvDA,qBAuDA;AACA,SAAA,eAAA;AACA,IAAA,GAAA,CAAA,GAAA,CAAA,oBAAA,EAAA,KAAA,iBAAA;AACA;AA1DA,CAAA","sourcesContent":["<template>\n  <div class=\"v-table-users\">\n    <table>\n    <tr>\n      <td>Пользователь</td>\n      <td>Имя</td>\n      <td>Фамилия</td>\n      <td>Отчество</td>\n      <td>Активный</td>\n      <td>E-mail</td>\n      <td>Должность</td>\n      <td>Телефон</td>\n      <td>Дата рождения</td>\n      <td>Изменить</td>\n    </tr>\n    <tr v-for=\"(user,index) in users\" :key=\"user.id\">\n        <td>{{ user.username }}, id:{{user.id}}, {{index}}</td>\n        <td>{{ user.first_name }}</td>\n        <td>{{ user.last_name }}</td>\n        <td>{{ user.userprofile.thirdname }}</td>\n        <td>{{ user.is_active ? 'да' : 'нет' }}</td>\n        <td>{{ user.email }}</td>\n        <td>{{ user.userprofile.position }}</td>\n        <td>{{ user.userprofile.telephone }}</td>\n        <td>{{ user.userprofile.birthday }}</td>\n        <td>\n        <button @click=\"sendIndex(index)\">Редактировать</button>\n        <button @click=\"deleteUser(user.id,index)\">Удалить</button>\n        </td>\n      </tr>\n    </table>\n    <button @click=\"addUser\">Добавить пользователя</button>\n  </div>\n</template>\n\n<script>\nimport { bus } from './bus.js'\nimport axios from 'axios'\n\n\n\nexport default {\n  name: 'v-table-users',\n  components: {\n\n  },\n  props: {},\n  data() {\n    return {\n      users:{},\n    }\n  },\n\nmethods: {\n    //Отправить index пользователя, флаг для попапа\n    sendIndex(index){\n      bus.$emit('sendIndex', index);\n      bus.$emit('editUser',true);\n      console.log('Index ' + index + ' was send');\n    },\n    //Добавить пользователя, флаг для попапа\n    addUser(){\n      bus.$emit('addNewUser', true)\n    },\n    //Удалить пользователя из таблицы\n    deleteUser(id,index){\n      axios .delete('http://localhost:3000/users/'+id)\n      .then((response) =>{\n        console.log(response);\n      })\n      .catch((error) => {\n                console.log(error);  \n                return error;\n        });\n      this.users.splice(index,1);\n      console.log(this.users)\n      this.getUsersFromApi;\n    },\n    //Получить новый список пользователей из АПИ\n    getUsersFromApi(){\n      axios .get ('http://localhost:3000/users')\n        .then((response) =>{\n          this.users = response.data;\n        console.log(response,'users got');\n      })\n      .catch((error) => {\n                console.log(error);  \n                return error;\n    })\n    },\n    //Добавить пользователя из попап в таблицу, слушаем попап\n    addNewUserToTable(data){\n      this.users.push(data);\n    },\n  },\n  \n  mounted() {\n    this.getUsersFromApi()\n    bus.$on('sendNewUserToTable',this.addNewUserToTable);\n  },\n\n}\n</script>\n\n<style lang=\"css\" scoped>\n.v-table-users{\nwidth: 100%;\nmax-width: 100%;\nz-index: 900;  \nposition: absolute;\ntop:0px;\n}\n\ntable{\nmax-width: 100%;\nwidth: 100%;  \n}\n</style>\n"],"sourceRoot":"src/components"}]}